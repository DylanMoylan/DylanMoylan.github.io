(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{"130c":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",{staticClass:"flex full-height"},[n("q-scroll-area",{staticClass:"q-pa-md",staticStyle:{"text-align":"center","background-color":"#f5f5f5",width:"100%"},attrs:{visible:""}},[n("div",{staticClass:"q-mx-auto q-pa-lg",staticStyle:{height:"inherit"}},[n("div",{staticClass:"text-h4 text-center q-mb-md"},[t._v("Staging Edits")]),t.fetched?n("staging-edit-summary",{attrs:{projectID:t.projectID}}):t._e()],1)])],1)},r=[],a=(n("8e6e"),n("8a81"),n("ac6a"),n("cadf"),n("06db"),n("456d"),n("9523")),s=n.n(a),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"q-mx-auto q-pa-md"},[n("q-table",{staticClass:"staging-table",attrs:{data:t.rowData,columns:t.columns,"row-key":"name",separator:"cell",dense:"",filter:t.reviewType,"filter-method":t.filterMethod,pagination:t.pagination},scopedSlots:t._u([{key:"top",fn:function(){return[n("div",{staticClass:"text-bold text-h5 text-primary row full-width text-left q-mb-md justify-between items-center"},[n("q-select",{staticClass:"text-h6",attrs:{value:t.reviewType,options:t.reviewTypeOptions,filled:"","emit-value":"","map-options":"","stack-label":"",label:"Action"},on:{input:t.setReviewType}}),"prev"==t.reviewType?n("div",{staticClass:"text-bold"},[n("span",[t._v("Viewing Staging Edits from:")]),n("q-select",{staticClass:"q-ml-md text-h6",staticStyle:{width:"350px",display:"inline-block"},attrs:{options:t.versionOptions,value:t.defaultSelectedRound,filled:"","emit-value":"","map-options":"","stack-label":"",label:"Select Round to View"},on:{input:function(e){return t.selectedRound=e}}})],1):t._e()],1),n("div",{staticClass:"full-width text-left"},["current"==t.reviewType?[n("div",{staticClass:" text-bold"},[t._v("Rows in this table are generated automatically based on changes you have made to the ProdTicket during the current session.")]),n("div",{staticClass:" text-bold"},[t._v("You May also click 'Add a Custom Change' to add an edit which the ProdTicket does not cover.")]),n("div",{staticClass:" text-bold"},[t._v('Select "Review All Edits" above to see pending staging edits for this round from all users'+t._s(t.hasPermission("drop")?", and to drop the current staging round.":"."))])]:"all"==t.reviewType?[n("div",{staticClass:" text-bold"},[t._v("Viewing all pending staging edits from the current round from all users. These changes will not be applied until the round is dropped.")])]:t._e()],2)]},proxy:!0},{key:"header",fn:function(e){return[n("q-tr",{attrs:{props:e}},t._l(e.cols,(function(i){return n("q-th",{key:i.name,staticClass:"bg-primary text-white",attrs:{props:e,"auto-width":"affectsAV"==i.name||"affectsText"==i.name}},["changeDescription"==i.name?n("div",{staticClass:"q-pa-sm"},[n("div",{staticClass:"text-bold"},[t._v("Instructions for Edit "),n("br"),t._v(" (copy & paste section and highlight as necessary)")]),n("div",[n("span",{staticClass:"deletion"},[t._v("Red Highlight")]),n("span",[t._v(" = Text Deletion")])]),n("div",[n("span",{staticClass:"addition text-black"},[t._v("Yellow Highlight")]),n("span",[t._v(" = Text Addition")])])]):"fieldName"==i.name?n("div",[n("div",{staticClass:"text-bold"},[t._v("Location")]),n("div",[t._v("Slide, figure or paragraph #")])]):"affectsAV"==i.name?n("div",[n("div",{staticClass:"text-bold"},[t._v("Affects Audio/Video Program")]),n("div",[t._v("Yes or No (optional)")])]):"affectsText"==i.name?n("div",[n("div",{staticClass:"text-bold"},[t._v("Affects Text")]),n("div",[t._v("Yes or No (optional)")])]):"changes"==i.name?n("div",[n("div",{staticClass:"text-bold"},[t._v("Final Text")]),n("div",[t._v("Changes to this column do not affect the contents of the prodticket. "),n("br"),t._v(" Please edit the relevant field directly, when possible.")])]):n("div",{staticClass:"q-pa-sm"},[t._v(t._s(i.label))])])})),1)]}},{key:"body",fn:function(e){return[n("q-tr",{attrs:{props:e,"no-hover":""}},t._l(e.cols,(function(i){return n("q-td",{key:i.name,class:e.row.current?"cursor-pointer":"cursor-pointer bg-grey-4",style:{"max-width":"changeDescription"==i.name||"changes"==i.name?"35rem":"url"==i.name?"10rem":"","white-space":"normal","word-break":"url"==i.name?"break-word":"","vertical-align":"top"},attrs:{props:e}},["changeDescription"==i.name&&t.hasPermission("edit")?[e.row.changeDescription.length?n("div",{staticClass:"change-description",domProps:{innerHTML:t._s(e.row.changeDescription)}}):n("div",{staticClass:"text-positive text-body1"},[t._v("Click to edit")]),n("q-popup-edit",{attrs:{title:"Add a description of changes",buttons:""},model:{value:e.row.changeDescription,callback:function(n){t.$set(e.row,"changeDescription",n)},expression:"props.row.changeDescription"}},[n("custom-editor",{staticClass:"internal-editor",attrs:{keyup:t.keyupHandler},model:{value:e.row.changeDescription,callback:function(n){t.$set(e.row,"changeDescription",n)},expression:"props.row.changeDescription"}})],1)]:"changes"==i.name&&t.hasPermission("edit")?[e.row.changes.length?n("div",{staticClass:"change-description",domProps:{innerHTML:t._s(e.row.changes)}}):n("div",{staticClass:"text-positive text-body1"},[t._v("Click to edit")]),n("q-popup-edit",{attrs:{title:"Add/Edit Changes to this field",buttons:""},model:{value:e.row.changes,callback:function(n){t.$set(e.row,"changes",n)},expression:"props.row.changes"}},[n("custom-editor",{staticClass:"internal-editor",attrs:{keyup:t.keyupHandler},model:{value:e.row.changes,callback:function(n){t.$set(e.row,"changes",n)},expression:"props.row.changes"}})],1)]:"url"==i.name&&t.hasPermission("edit")?[n("a",{attrs:{href:e.row.url}},[t._v(t._s(e.row.url))]),n("q-popup-edit",{attrs:{title:"Add/Edit Changes to this field",buttons:""},model:{value:e.row.url,callback:function(n){t.$set(e.row,"url",n)},expression:"props.row.url"}},[n("q-input",{attrs:{dense:"",autofocus:""},model:{value:e.row.url,callback:function(n){t.$set(e.row,"url",n)},expression:"props.row.url"}})],1)]:"fieldName"==i.name&&t.hasPermission("edit")?[n("div",[t._v("\n                              "+t._s(i.field(e.row))+"\n                          ")]),n("q-popup-edit",{attrs:{title:"Add/Edit Changes to this field",buttons:"",value:e.row.location.length?e.row.location:i.field(e.row)}},[n("q-select",{staticClass:"q-mb-sm",attrs:{"use-input":"","fill-input":"",filled:"","hide-selected":"",options:t.filteredFieldNameOptions,value:e.row.location.length?e.row.location:i.field(e.row),"new-value-mode":"add-unique","bottom-slots":""},on:{filter:t.filterFieldNameOptions,input:function(t){return e.row.location=t},"input-value":function(t){return e.row.location=t}},scopedSlots:t._u([{key:"hint",fn:function(){return[t._v("\n                                      Type to enter a new value or filter the existing options.\n                                  ")]},proxy:!0}],null,!0)})],1)]:"affectsText"==i.name?[n("q-checkbox",{attrs:{label:e.row.affectsText?"Yes":"No",disable:!t.hasPermission("edit")},model:{value:e.row.affectsText,callback:function(n){t.$set(e.row,"affectsText",n)},expression:"props.row.affectsText"}})]:"affectsAV"==i.name?[n("q-checkbox",{attrs:{label:e.row.affectsAV?"Yes":"No",disable:!t.hasPermission("edit")},model:{value:e.row.affectsAV,callback:function(n){t.$set(e.row,"affectsAV",n)},expression:"props.row.affectsAV"}})]:"addedBy"==i.name?[n("div",{domProps:{innerHTML:t._s(i.field(e.row))}}),t.hasPermission("drop")||e.row.addedBy==t.username?n("q-btn",{staticClass:"bg-negative text-white q-my-sm",attrs:{dense:"",flat:"",icon:"remove",label:"Delete","no-caps":""},on:{click:function(n){return t.removeRow(e.row.fieldName)}}}):t._e(),n("div",["all"==t.reviewType&&t.hasPermission("drop")?n("q-checkbox",{attrs:{value:e.row.selected},on:{input:function(n){return t.selectRow(n,e.row.index)}}},[n("div",[t._v("Include this change when "),n("br"),t._v("completing this staging round")])]):t._e()],1)]:[n("div",{domProps:{innerHTML:t._s(i.field(e.row))}})]],2)})),1)]}},{key:"bottom",fn:function(){return[n("div",{staticClass:"col full-width justify-center q-pa-sm"},["prev"!=t.reviewType?n("q-btn",{staticClass:"bg-primary text-white",attrs:{label:"Add a custom change",icon:"add",disable:!t.hasPermission("edit")},on:{click:t.addRow}}):t._e(),n("div",{staticClass:"text-left q-mb-md"},[n("div",{staticClass:"text-bold q-ma-sm"},[t._v("Additional Notes For this Round (optional, all users)")]),n("custom-editor",{attrs:{disable:!t.hasPermission("edit")},model:{value:t.additionalNotes,callback:function(e){t.additionalNotes=e},expression:"additionalNotes"}})],1)],1)]},proxy:!0},{key:"no-data",fn:function(){return[n("div",{staticClass:"col full-width justify-center q-pa-md"},["prev"!=t.reviewType?n("div",[n("q-btn",{staticClass:"bg-primary text-white",attrs:{label:"Add a custom change",icon:"add",disable:!t.hasPermission("edit")},on:{click:t.addRow}})],1):t._e(),n("div",{staticClass:"text-negative text-italic q-mb-md"},[t._v("No Changes detected")]),n("div",{staticClass:"text-left q-mb-md"},[n("div",{staticClass:"text-bold q-ma-sm"},[t._v("Additional Notes For this Round (optional, all users)")]),n("custom-editor",{attrs:{disable:!t.hasPermission("edit")},model:{value:t.additionalNotes,callback:function(e){t.additionalNotes=e},expression:"additionalNotes"}})],1)])]},proxy:!0}])}),n("div",{staticClass:"full-width row justify-end q-my-md"},["current"==t.reviewType?n("div",[n("q-btn",{staticClass:"bg-positive text-white",attrs:{label:"Submit Staging Edit(s)",icon:"check",disable:!t.canSubmit||!t.hasPermission("edit")},on:{click:t.confirmSubmit}}),t.hasEdits?t.hasDetails?t._e():n("q-tooltip",{attrs:{"content-class":"bg-negative text-white text-body2"}},[t._v("\n                  There are staging edits with no submission information."),n("br"),t._v(' Please fill out "Instructions for Edit" and/or'),n("br"),t._v(' "Final Text" for each row in the table.\n              ')]):n("q-tooltip",{attrs:{"content-class":"bg-negative text-white text-body2"}},[t._v("\n                  No changes have been added in this session."),n("br"),t._v("Make changes to the ticket or add custom changes to the"),n("br"),t._v("table to enable this feature.\n              ")])],1):t.hasPermission("drop")&&"all"==t.reviewType?n("div",[n("q-btn",{staticClass:"bg-negative text-white q-mt-md",attrs:{label:"Consolidate Edits & Drop Staging Round",disable:!t.canDrop},on:{click:t.consolidateAndDrop}}),t.hasEdits?t.hasSelected?t.hasDetails?t._e():n("q-tooltip",{attrs:{"content-class":"bg-negative text-white text-body2"}},[t._v("\n                  There are staging edits with no submission information."),n("br"),t._v(' Please fill out "Instructions for Edit" and/or'),n("br"),t._v(' "Final Text" for each row in the table.\n              ')]):n("q-tooltip",{attrs:{"content-class":"bg-negative text-white text-body2"}},[t._v("\n                  No changes are currently selected. Please select"),n("br"),t._v(" one or more edits from the table to enable this feature.\n              ")]):n("q-tooltip",{attrs:{"content-class":"bg-negative text-white text-body2"}},[t._v("\n                  No edits have been submitted for this staging round."),n("br"),t._v(" You or another user must submit an edit to enable this feature.\n              ")])],1):n("div",[n("q-btn",{staticClass:"bg-positive text-white q-mt-md",attrs:{label:"Save Changes",disable:!t.hasPermission("edit")},on:{click:t.confirmSubmit}},[n("q-tooltip",{attrs:{"content-class":"bg-negative text-white text-body2"}},[t._v("\n                      Submits any changes you've made to the table."),n("br"),t._v("NOTE: These changes do not affect the contents"),n("br"),t._v(" of the Prodticket. Please update the ticket itself"),n("br"),t._v("and submit a new staging edit, if possible.\n                  ")])],1)],1)])],1)},l=[],c=(n("4917"),n("28a5"),n("f751"),n("7037")),h=n.n(c),f=(n("7514"),n("20d6"),n("6762"),n("2fdb"),n("2f62")),d=(n("a481"),n("c5f6"),n("6b54"),function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}),u=-1,g=1,p=0;d.Diff=function(t,e){this[0]=t,this[1]=e},d.Diff.prototype.length=2,d.Diff.prototype.toString=function(){return this[0]+","+this[1]},d.prototype.diff_main=function(t,e,n,i){"undefined"==typeof i&&(i=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var r=i;if(null==t||null==e)throw new Error("Null input. (diff_main)");if(t==e)return t?[new d.Diff(p,t)]:[];"undefined"==typeof n&&(n=!0);var a=n,s=this.diff_commonPrefix(t,e),o=t.substring(0,s);t=t.substring(s),e=e.substring(s),s=this.diff_commonSuffix(t,e);var l=t.substring(t.length-s);t=t.substring(0,t.length-s),e=e.substring(0,e.length-s);var c=this.diff_compute_(t,e,a,r);return o&&c.unshift(new d.Diff(p,o)),l&&c.push(new d.Diff(p,l)),this.diff_cleanupMerge(c),c},d.prototype.diff_compute_=function(t,e,n,i){var r;if(!t)return[new d.Diff(g,e)];if(!e)return[new d.Diff(u,t)];var a=t.length>e.length?t:e,s=t.length>e.length?e:t,o=a.indexOf(s);if(-1!=o)return r=[new d.Diff(g,a.substring(0,o)),new d.Diff(p,s),new d.Diff(g,a.substring(o+s.length))],t.length>e.length&&(r[0][0]=r[2][0]=u),r;if(1==s.length)return[new d.Diff(u,t),new d.Diff(g,e)];var l=this.diff_halfMatch_(t,e);if(l){var c=l[0],h=l[1],f=l[2],b=l[3],m=l[4],v=this.diff_main(c,f,n,i),w=this.diff_main(h,b,n,i);return v.concat([new d.Diff(p,m)],w)}return n&&t.length>100&&e.length>100?this.diff_lineMode_(t,e,i):this.diff_bisect_(t,e,i)},d.prototype.diff_lineMode_=function(t,e,n){var i=this.diff_linesToChars_(t,e);t=i.chars1,e=i.chars2;var r=i.lineArray,a=this.diff_main(t,e,!1,n);this.diff_charsToLines_(a,r),this.diff_cleanupSemantic(a),a.push(new d.Diff(p,""));var s=0,o=0,l=0,c="",h="";while(s<a.length){switch(a[s][0]){case g:l++,h+=a[s][1];break;case u:o++,c+=a[s][1];break;case p:if(o>=1&&l>=1){a.splice(s-o-l,o+l),s=s-o-l;for(var f=this.diff_main(c,h,!1,n),b=f.length-1;b>=0;b--)a.splice(s,0,f[b]);s+=f.length}l=0,o=0,c="",h="";break}s++}return a.pop(),a},d.prototype.diff_bisect_=function(t,e,n){for(var i=t.length,r=e.length,a=Math.ceil((i+r)/2),s=a,o=2*a,l=new Array(o),c=new Array(o),h=0;h<o;h++)l[h]=-1,c[h]=-1;l[s+1]=0,c[s+1]=0;for(var f=i-r,p=f%2!=0,b=0,m=0,v=0,w=0,_=0;_<a;_++){if((new Date).getTime()>n)break;for(var y=-_+b;y<=_-m;y+=2){var D=s+y;P=y==-_||y!=_&&l[D-1]<l[D+1]?l[D+1]:l[D-1]+1;var x=P-y;while(P<i&&x<r&&t.charAt(P)==e.charAt(x))P++,x++;if(l[D]=P,P>i)m+=2;else if(x>r)b+=2;else if(p){var k=s+f-y;if(k>=0&&k<o&&-1!=c[k]){var j=i-c[k];if(P>=j)return this.diff_bisectSplit_(t,e,P,x,n)}}}for(var O=-_+v;O<=_-w;O+=2){k=s+O;j=O==-_||O!=_&&c[k-1]<c[k+1]?c[k+1]:c[k-1]+1;var N=j-O;while(j<i&&N<r&&t.charAt(i-j-1)==e.charAt(r-N-1))j++,N++;if(c[k]=j,j>i)w+=2;else if(N>r)v+=2;else if(!p){D=s+f-O;if(D>=0&&D<o&&-1!=l[D]){var P=l[D];x=s+P-D;if(j=i-j,P>=j)return this.diff_bisectSplit_(t,e,P,x,n)}}}}return[new d.Diff(u,t),new d.Diff(g,e)]},d.prototype.diff_bisectSplit_=function(t,e,n,i,r){var a=t.substring(0,n),s=e.substring(0,i),o=t.substring(n),l=e.substring(i),c=this.diff_main(a,s,!1,r),h=this.diff_main(o,l,!1,r);return c.concat(h)},d.prototype.diff_linesToChars_=function(t,e){var n=[],i={};function r(t){var e="",r=0,s=-1,o=n.length;while(s<t.length-1){s=t.indexOf("\n",r),-1==s&&(s=t.length-1);var l=t.substring(r,s+1);(i.hasOwnProperty?i.hasOwnProperty(l):void 0!==i[l])?e+=String.fromCharCode(i[l]):(o==a&&(l=t.substring(r),s=t.length),e+=String.fromCharCode(o),i[l]=o,n[o++]=l),r=s+1}return e}n[0]="";var a=4e4,s=r(t);a=65535;var o=r(e);return{chars1:s,chars2:o,lineArray:n}},d.prototype.diff_charsToLines_=function(t,e){for(var n=0;n<t.length;n++){for(var i=t[n][1],r=[],a=0;a<i.length;a++)r[a]=e[i.charCodeAt(a)];t[n][1]=r.join("")}},d.prototype.diff_commonPrefix=function(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;var n=0,i=Math.min(t.length,e.length),r=i,a=0;while(n<r)t.substring(a,r)==e.substring(a,r)?(n=r,a=n):i=r,r=Math.floor((i-n)/2+n);return r},d.prototype.diff_commonSuffix=function(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;var n=0,i=Math.min(t.length,e.length),r=i,a=0;while(n<r)t.substring(t.length-r,t.length-a)==e.substring(e.length-r,e.length-a)?(n=r,a=n):i=r,r=Math.floor((i-n)/2+n);return r},d.prototype.diff_commonOverlap_=function(t,e){var n=t.length,i=e.length;if(0==n||0==i)return 0;n>i?t=t.substring(n-i):n<i&&(e=e.substring(0,n));var r=Math.min(n,i);if(t==e)return r;var a=0,s=1;while(1){var o=t.substring(r-s),l=e.indexOf(o);if(-1==l)return a;s+=l,0!=l&&t.substring(r-s)!=e.substring(0,s)||(a=s,s++)}},d.prototype.diff_halfMatch_=function(t,e){if(this.Diff_Timeout<=0)return null;var n=t.length>e.length?t:e,i=t.length>e.length?e:t;if(n.length<4||2*i.length<n.length)return null;var r=this;function a(t,e,n){var i,a,s,o,l=t.substring(n,n+Math.floor(t.length/4)),c=-1,h="";while(-1!=(c=e.indexOf(l,c+1))){var f=r.diff_commonPrefix(t.substring(n),e.substring(c)),d=r.diff_commonSuffix(t.substring(0,n),e.substring(0,c));h.length<d+f&&(h=e.substring(c-d,c)+e.substring(c,c+f),i=t.substring(0,n-d),a=t.substring(n+f),s=e.substring(0,c-d),o=e.substring(c+f))}return 2*h.length>=t.length?[i,a,s,o,h]:null}var s,o,l,c,h,f=a(n,i,Math.ceil(n.length/4)),d=a(n,i,Math.ceil(n.length/2));if(!f&&!d)return null;s=d?f&&f[4].length>d[4].length?f:d:f,t.length>e.length?(o=s[0],l=s[1],c=s[2],h=s[3]):(c=s[0],h=s[1],o=s[2],l=s[3]);var u=s[4];return[o,l,c,h,u]},d.prototype.diff_cleanupSemantic=function(t){var e=!1,n=[],i=0,r=null,a=0,s=0,o=0,l=0,c=0;while(a<t.length)t[a][0]==p?(n[i++]=a,s=l,o=c,l=0,c=0,r=t[a][1]):(t[a][0]==g?l+=t[a][1].length:c+=t[a][1].length,r&&r.length<=Math.max(s,o)&&r.length<=Math.max(l,c)&&(t.splice(n[i-1],0,new d.Diff(u,r)),t[n[i-1]+1][0]=g,i--,i--,a=i>0?n[i-1]:-1,s=0,o=0,l=0,c=0,r=null,e=!0)),a++;e&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),a=1;while(a<t.length){if(t[a-1][0]==u&&t[a][0]==g){var h=t[a-1][1],f=t[a][1],b=this.diff_commonOverlap_(h,f),m=this.diff_commonOverlap_(f,h);b>=m?(b>=h.length/2||b>=f.length/2)&&(t.splice(a,0,new d.Diff(p,f.substring(0,b))),t[a-1][1]=h.substring(0,h.length-b),t[a+1][1]=f.substring(b),a++):(m>=h.length/2||m>=f.length/2)&&(t.splice(a,0,new d.Diff(p,h.substring(0,m))),t[a-1][0]=g,t[a-1][1]=f.substring(0,f.length-m),t[a+1][0]=u,t[a+1][1]=h.substring(m),a++),a++}a++}},d.prototype.diff_cleanupSemanticLossless=function(t){function e(t,e){if(!t||!e)return 6;var n=t.charAt(t.length-1),i=e.charAt(0),r=n.match(d.nonAlphaNumericRegex_),a=i.match(d.nonAlphaNumericRegex_),s=r&&n.match(d.whitespaceRegex_),o=a&&i.match(d.whitespaceRegex_),l=s&&n.match(d.linebreakRegex_),c=o&&i.match(d.linebreakRegex_),h=l&&t.match(d.blanklineEndRegex_),f=c&&e.match(d.blanklineStartRegex_);return h||f?5:l||c?4:r&&!s&&o?3:s||o?2:r||a?1:0}var n=1;while(n<t.length-1){if(t[n-1][0]==p&&t[n+1][0]==p){var i=t[n-1][1],r=t[n][1],a=t[n+1][1],s=this.diff_commonSuffix(i,r);if(s){var o=r.substring(r.length-s);i=i.substring(0,i.length-s),r=o+r.substring(0,r.length-s),a=o+a}var l=i,c=r,h=a,f=e(i,r)+e(r,a);while(r.charAt(0)===a.charAt(0)){i+=r.charAt(0),r=r.substring(1)+a.charAt(0),a=a.substring(1);var u=e(i,r)+e(r,a);u>=f&&(f=u,l=i,c=r,h=a)}t[n-1][1]!=l&&(l?t[n-1][1]=l:(t.splice(n-1,1),n--),t[n][1]=c,h?t[n+1][1]=h:(t.splice(n+1,1),n--))}n++}},d.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,d.whitespaceRegex_=/\s/,d.linebreakRegex_=/[\r\n]/,d.blanklineEndRegex_=/\n\r?\n$/,d.blanklineStartRegex_=/^\r?\n\r?\n/,d.prototype.diff_cleanupEfficiency=function(t){var e=!1,n=[],i=0,r=null,a=0,s=!1,o=!1,l=!1,c=!1;while(a<t.length)t[a][0]==p?(t[a][1].length<this.Diff_EditCost&&(l||c)?(n[i++]=a,s=l,o=c,r=t[a][1]):(i=0,r=null),l=c=!1):(t[a][0]==u?c=!0:l=!0,r&&(s&&o&&l&&c||r.length<this.Diff_EditCost/2&&s+o+l+c==3)&&(t.splice(n[i-1],0,new d.Diff(u,r)),t[n[i-1]+1][0]=g,i--,r=null,s&&o?(l=c=!0,i=0):(i--,a=i>0?n[i-1]:-1,l=c=!1),e=!0)),a++;e&&this.diff_cleanupMerge(t)},d.prototype.diff_cleanupMerge=function(t){t.push(new d.Diff(p,""));var e,n=0,i=0,r=0,a="",s="";while(n<t.length)switch(t[n][0]){case g:r++,s+=t[n][1],n++;break;case u:i++,a+=t[n][1],n++;break;case p:i+r>1?(0!==i&&0!==r&&(e=this.diff_commonPrefix(s,a),0!==e&&(n-i-r>0&&t[n-i-r-1][0]==p?t[n-i-r-1][1]+=s.substring(0,e):(t.splice(0,0,new d.Diff(p,s.substring(0,e))),n++),s=s.substring(e),a=a.substring(e)),e=this.diff_commonSuffix(s,a),0!==e&&(t[n][1]=s.substring(s.length-e)+t[n][1],s=s.substring(0,s.length-e),a=a.substring(0,a.length-e))),n-=i+r,t.splice(n,i+r),a.length&&(t.splice(n,0,new d.Diff(u,a)),n++),s.length&&(t.splice(n,0,new d.Diff(g,s)),n++),n++):0!==n&&t[n-1][0]==p?(t[n-1][1]+=t[n][1],t.splice(n,1)):n++,r=0,i=0,a="",s="";break}""===t[t.length-1][1]&&t.pop();var o=!1;n=1;while(n<t.length-1)t[n-1][0]==p&&t[n+1][0]==p&&(t[n][1].substring(t[n][1].length-t[n-1][1].length)==t[n-1][1]?(t[n][1]=t[n-1][1]+t[n][1].substring(0,t[n][1].length-t[n-1][1].length),t[n+1][1]=t[n-1][1]+t[n+1][1],t.splice(n-1,1),o=!0):t[n][1].substring(0,t[n+1][1].length)==t[n+1][1]&&(t[n-1][1]+=t[n+1][1],t[n][1]=t[n][1].substring(t[n+1][1].length)+t[n+1][1],t.splice(n+1,1),o=!0)),n++;o&&this.diff_cleanupMerge(t)},d.prototype.diff_xIndex=function(t,e){var n,i=0,r=0,a=0,s=0;for(n=0;n<t.length;n++){if(t[n][0]!==g&&(i+=t[n][1].length),t[n][0]!==u&&(r+=t[n][1].length),i>e)break;a=i,s=r}return t.length!=n&&t[n][0]===u?s:s+(e-a)},d.prototype.diff_prettyHtml=function(t){for(var e=[],n=/&/g,i=/</g,r=/>/g,a=/\n/g,s=0;s<t.length;s++){var o=t[s][0],l=t[s][1],c=l.replace(n,"&amp;").replace(i,"&lt;").replace(r,"&gt;").replace(a,"&para;<br>");switch(o){case g:e[s]='<span class="addition">'+c+"</span>";break;case u:e[s]='<span class="deletion">'+c+"</span>";break;case p:e[s]="<span>"+c+"</span>";break}}return e.join("")},d.prototype.diff_text1=function(t){for(var e=[],n=0;n<t.length;n++)t[n][0]!==g&&(e[n]=t[n][1]);return e.join("")},d.prototype.diff_text2=function(t){for(var e=[],n=0;n<t.length;n++)t[n][0]!==u&&(e[n]=t[n][1]);return e.join("")},d.prototype.diff_levenshtein=function(t){for(var e=0,n=0,i=0,r=0;r<t.length;r++){var a=t[r][0],s=t[r][1];switch(a){case g:n+=s.length;break;case u:i+=s.length;break;case p:e+=Math.max(n,i),n=0,i=0;break}}return e+=Math.max(n,i),e},d.prototype.diff_toDelta=function(t){for(var e=[],n=0;n<t.length;n++)switch(t[n][0]){case g:e[n]="+"+encodeURI(t[n][1]);break;case u:e[n]="-"+t[n][1].length;break;case p:e[n]="="+t[n][1].length;break}return e.join("\t").replace(/%20/g," ")},d.prototype.diff_fromDelta=function(t,e){for(var n=[],i=0,r=0,a=e.split(/\t/g),s=0;s<a.length;s++){var o=a[s].substring(1);switch(a[s].charAt(0)){case"+":try{n[i++]=new d.Diff(g,decodeURI(o))}catch(h){throw new Error("Illegal escape in diff_fromDelta: "+o)}break;case"-":case"=":var l=parseInt(o,10);if(isNaN(l)||l<0)throw new Error("Invalid number in diff_fromDelta: "+o);var c=t.substring(r,r+=l);"="==a[s].charAt(0)?n[i++]=new d.Diff(p,c):n[i++]=new d.Diff(u,c);break;default:if(a[s])throw new Error("Invalid diff operation in diff_fromDelta: "+a[s])}}if(r!=t.length)throw new Error("Delta length ("+r+") does not equal source text length ("+t.length+").");return n},d.prototype.match_main=function(t,e,n){if(null==t||null==e||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,t.length)),t==e?0:t.length?t.substring(n,n+e.length)==e?n:this.match_bitap_(t,e,n):-1},d.prototype.match_bitap_=function(t,e,n){if(e.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var i=this.match_alphabet_(e),r=this;function a(t,i){var a=t/e.length,s=Math.abs(n-i);return r.Match_Distance?a+s/r.Match_Distance:s?1:a}var s=this.Match_Threshold,o=t.indexOf(e,n);-1!=o&&(s=Math.min(a(0,o),s),o=t.lastIndexOf(e,n+e.length),-1!=o&&(s=Math.min(a(0,o),s)));var l,c,h=1<<e.length-1;o=-1;for(var f,d=e.length+t.length,u=0;u<e.length;u++){l=0,c=d;while(l<c)a(u,n+c)<=s?l=c:d=c,c=Math.floor((d-l)/2+l);d=c;var g=Math.max(1,n-c+1),p=Math.min(n+c,t.length)+e.length,b=Array(p+2);b[p+1]=(1<<u)-1;for(var m=p;m>=g;m--){var v=i[t.charAt(m-1)];if(b[m]=0===u?(b[m+1]<<1|1)&v:(b[m+1]<<1|1)&v|(f[m+1]|f[m])<<1|1|f[m+1],b[m]&h){var w=a(u,m-1);if(w<=s){if(s=w,o=m-1,!(o>n))break;g=Math.max(1,2*n-o)}}}if(a(u+1,n)>s)break;f=b}return o},d.prototype.match_alphabet_=function(t){for(var e={},n=0;n<t.length;n++)e[t.charAt(n)]=0;for(n=0;n<t.length;n++)e[t.charAt(n)]|=1<<t.length-n-1;return e},d.prototype.patch_addContext_=function(t,e){if(0!=e.length){if(null===t.start2)throw Error("patch not initialized");var n=e.substring(t.start2,t.start2+t.length1),i=0;while(e.indexOf(n)!=e.lastIndexOf(n)&&n.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin)i+=this.Patch_Margin,n=e.substring(t.start2-i,t.start2+t.length1+i);i+=this.Patch_Margin;var r=e.substring(t.start2-i,t.start2);r&&t.diffs.unshift(new d.Diff(p,r));var a=e.substring(t.start2+t.length1,t.start2+t.length1+i);a&&t.diffs.push(new d.Diff(p,a)),t.start1-=r.length,t.start2-=r.length,t.length1+=r.length+a.length,t.length2+=r.length+a.length}},d.prototype.patch_make=function(t,e,n){var i,r;if("string"==typeof t&&"string"==typeof e&&"undefined"==typeof n)i=t,r=this.diff_main(i,e,!0),r.length>2&&(this.diff_cleanupSemantic(r),this.diff_cleanupEfficiency(r));else if(t&&"object"==h()(t)&&"undefined"==typeof e&&"undefined"==typeof n)r=t,i=this.diff_text1(r);else if("string"==typeof t&&e&&"object"==h()(e)&&"undefined"==typeof n)i=t,r=e;else{if("string"!=typeof t||"string"!=typeof e||!n||"object"!=h()(n))throw new Error("Unknown call format to patch_make.");i=t,r=n}if(0===r.length)return[];for(var a=[],s=new d.patch_obj,o=0,l=0,c=0,f=i,b=i,m=0;m<r.length;m++){var v=r[m][0],w=r[m][1];switch(o||v===p||(s.start1=l,s.start2=c),v){case g:s.diffs[o++]=r[m],s.length2+=w.length,b=b.substring(0,c)+w+b.substring(c);break;case u:s.length1+=w.length,s.diffs[o++]=r[m],b=b.substring(0,c)+b.substring(c+w.length);break;case p:w.length<=2*this.Patch_Margin&&o&&r.length!=m+1?(s.diffs[o++]=r[m],s.length1+=w.length,s.length2+=w.length):w.length>=2*this.Patch_Margin&&o&&(this.patch_addContext_(s,f),a.push(s),s=new d.patch_obj,o=0,f=b,l=c);break}v!==g&&(l+=w.length),v!==u&&(c+=w.length)}return o&&(this.patch_addContext_(s,f),a.push(s)),a},d.prototype.patch_deepCopy=function(t){for(var e=[],n=0;n<t.length;n++){var i=t[n],r=new d.patch_obj;r.diffs=[];for(var a=0;a<i.diffs.length;a++)r.diffs[a]=new d.Diff(i.diffs[a][0],i.diffs[a][1]);r.start1=i.start1,r.start2=i.start2,r.length1=i.length1,r.length2=i.length2,e[n]=r}return e},d.prototype.patch_apply=function(t,e){if(0==t.length)return[e,[]];t=this.patch_deepCopy(t);var n=this.patch_addPadding(t);e=n+e+n,this.patch_splitMax(t);for(var i=0,r=[],a=0;a<t.length;a++){var s,o,l=t[a].start2+i,c=this.diff_text1(t[a].diffs),h=-1;if(c.length>this.Match_MaxBits?(s=this.match_main(e,c.substring(0,this.Match_MaxBits),l),-1!=s&&(h=this.match_main(e,c.substring(c.length-this.Match_MaxBits),l+c.length-this.Match_MaxBits),(-1==h||s>=h)&&(s=-1))):s=this.match_main(e,c,l),-1==s)r[a]=!1,i-=t[a].length2-t[a].length1;else if(r[a]=!0,i=s-l,o=-1==h?e.substring(s,s+c.length):e.substring(s,h+this.Match_MaxBits),c==o)e=e.substring(0,s)+this.diff_text2(t[a].diffs)+e.substring(s+c.length);else{var f=this.diff_main(c,o,!1);if(c.length>this.Match_MaxBits&&this.diff_levenshtein(f)/c.length>this.Patch_DeleteThreshold)r[a]=!1;else{this.diff_cleanupSemanticLossless(f);for(var d,b=0,m=0;m<t[a].diffs.length;m++){var v=t[a].diffs[m];v[0]!==p&&(d=this.diff_xIndex(f,b)),v[0]===g?e=e.substring(0,s+d)+v[1]+e.substring(s+d):v[0]===u&&(e=e.substring(0,s+d)+e.substring(s+this.diff_xIndex(f,b+v[1].length))),v[0]!==u&&(b+=v[1].length)}}}}return e=e.substring(n.length,e.length-n.length),[e,r]},d.prototype.patch_addPadding=function(t){for(var e=this.Patch_Margin,n="",i=1;i<=e;i++)n+=String.fromCharCode(i);for(i=0;i<t.length;i++)t[i].start1+=e,t[i].start2+=e;var r=t[0],a=r.diffs;if(0==a.length||a[0][0]!=p)a.unshift(new d.Diff(p,n)),r.start1-=e,r.start2-=e,r.length1+=e,r.length2+=e;else if(e>a[0][1].length){var s=e-a[0][1].length;a[0][1]=n.substring(a[0][1].length)+a[0][1],r.start1-=s,r.start2-=s,r.length1+=s,r.length2+=s}if(r=t[t.length-1],a=r.diffs,0==a.length||a[a.length-1][0]!=p)a.push(new d.Diff(p,n)),r.length1+=e,r.length2+=e;else if(e>a[a.length-1][1].length){s=e-a[a.length-1][1].length;a[a.length-1][1]+=n.substring(0,s),r.length1+=s,r.length2+=s}return n},d.prototype.patch_splitMax=function(t){for(var e=this.Match_MaxBits,n=0;n<t.length;n++)if(!(t[n].length1<=e)){var i=t[n];t.splice(n--,1);var r=i.start1,a=i.start2,s="";while(0!==i.diffs.length){var o=new d.patch_obj,l=!0;o.start1=r-s.length,o.start2=a-s.length,""!==s&&(o.length1=o.length2=s.length,o.diffs.push(new d.Diff(p,s)));while(0!==i.diffs.length&&o.length1<e-this.Patch_Margin){var c=i.diffs[0][0],h=i.diffs[0][1];c===g?(o.length2+=h.length,a+=h.length,o.diffs.push(i.diffs.shift()),l=!1):c===u&&1==o.diffs.length&&o.diffs[0][0]==p&&h.length>2*e?(o.length1+=h.length,r+=h.length,l=!1,o.diffs.push(new d.Diff(c,h)),i.diffs.shift()):(h=h.substring(0,e-o.length1-this.Patch_Margin),o.length1+=h.length,r+=h.length,c===p?(o.length2+=h.length,a+=h.length):l=!1,o.diffs.push(new d.Diff(c,h)),h==i.diffs[0][1]?i.diffs.shift():i.diffs[0][1]=i.diffs[0][1].substring(h.length))}s=this.diff_text2(o.diffs),s=s.substring(s.length-this.Patch_Margin);var f=this.diff_text1(i.diffs).substring(0,this.Patch_Margin);""!==f&&(o.length1+=f.length,o.length2+=f.length,0!==o.diffs.length&&o.diffs[o.diffs.length-1][0]===p?o.diffs[o.diffs.length-1][1]+=f:o.diffs.push(new d.Diff(p,f))),l||t.splice(++n,0,o)}}},d.prototype.patch_toText=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=t[n];return e.join("")},d.prototype.patch_fromText=function(t){var e=[];if(!t)return e;var n=t.split("\n"),i=0,r=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;while(i<n.length){var a=n[i].match(r);if(!a)throw new Error("Invalid patch string: "+n[i]);var s=new d.patch_obj;e.push(s),s.start1=parseInt(a[1],10),""===a[2]?(s.start1--,s.length1=1):"0"==a[2]?s.length1=0:(s.start1--,s.length1=parseInt(a[2],10)),s.start2=parseInt(a[3],10),""===a[4]?(s.start2--,s.length2=1):"0"==a[4]?s.length2=0:(s.start2--,s.length2=parseInt(a[4],10)),i++;while(i<n.length){var o=n[i].charAt(0);try{var l=decodeURI(n[i].substring(1))}catch(c){throw new Error("Illegal escape in patch_fromText: "+l)}if("-"==o)s.diffs.push(new d.Diff(u,l));else if("+"==o)s.diffs.push(new d.Diff(g,l));else if(" "==o)s.diffs.push(new d.Diff(p,l));else{if("@"==o)break;if(""!==o)throw new Error('Invalid patch mode "'+o+'" in: '+l)}i++}}return e},d.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},d.patch_obj.prototype.toString=function(){var t,e;t=0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1,e=0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2;for(var n,i=["@@ -"+t+" +"+e+" @@\n"],r=0;r<this.diffs.length;r++){switch(this.diffs[r][0]){case g:n="+";break;case u:n="-";break;case p:n=" ";break}i[r+1]=n+encodeURI(this.diffs[r][1])+"\n"}return i.join("").replace(/%20/g," ")};var b=d,m=n("6165"),v=n("f262"),w=n("2ef0"),_=n.n(w),y=n("eed6");function D(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function x(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?D(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var k=new b,j={mixins:[m["a"],v["a"]],props:["projectID"],data:function(){var t=this;return{additionalNotes:"",columns:[{name:"url",label:"URL",field:function(t){return t.url},align:"left"},{name:"fieldName",label:"Location",field:function(e){return e.location.length?e.location:e.fieldName.includes("custom")?"Custom Change":t.getLabel(e.segmentName,e.fieldName)},align:"left"},{name:"changeDescription",label:"Instructions for Edit",field:function(t){return t.changeDescription},align:"left"},{name:"changes",label:"Final Text",field:function(t){return t.changes},align:"left"},{name:"affectsText",label:"Affects Text Yes or No (optional)",align:"left",field:function(t){return t.affectsText}},{name:"affectsAV",label:"Affects Audio or Video Program Yes or No (optional)",align:"left",field:function(t){return t.affectsAV}},{name:"addedBy",label:"Options & Submission Details",align:"right",field:function(e){return"Submitted By: <br /> ".concat(t.getFullName(e.addedBy))}}],rowData:[],reviewType:"current",pagination:{rowsPerPage:100},selectedRound:null,filteredFieldNameOptions:this.fieldNameOptions}},components:{"custom-editor":y["a"]},computed:x(x(x({},Object(f["c"])("tickets",["getUnSubmitted","deletedFields","droppedTicket","activeTicket","baseTicket","getStagingRound","hasLocal","getStagingRoundNumber","getTargetStagingRoundNumber","droppedStagingRounds","getStagingEdits","getProjectID","projectIsInStaging","targetProjectIsInStaging","getTargetProductType","getTargetFieldData"])),Object(f["c"])("auth",["username"])),{},{productType:function(){return this.getTargetProductType(this.computedProjectID)},url:function(){return"https://www.medscape.org/sites/advances/".concat(this.productType.includes("advances")?this.getTargetFieldData({projectID:this.computedProjectID,segmentName:"clinicalAdvancesPageDetails",fieldName:"clinicalAdvancesURL"})[1].url:"")},fieldNameOptions:function(){var t=this;return Object.keys(this.navigationSegments).reduce((function(e,n){var i=t.navigationSegments[n];return Object.keys(i.fields).forEach((function(t){e.push(i.fields[t].label)})),e}),[]).sort()},reviewTypeOptions:function(){return[{label:"Submit new staging edits".concat(this.isInStaging?" (".concat(this.stagingRoundNumber,")"):" (Project not in staging)"),value:"current",disable:!this.isInStaging||!this.hasPermission("edit")},{label:"Review all pending edits from the current round".concat(this.hasPending?"":" (None)"),value:"all",disable:!this.hasPending},{label:"View Dropped Staging Rounds".concat(Object.keys(this.currentDroppedRounds).length?"":" (None)"),value:"prev",disable:!Object.keys(this.currentDroppedRounds).length}]},versionOptions:function(){var t=this;return Object.keys(this.currentDroppedRounds).map((function(e){return{label:e=="S"+Object.keys(t.currentDroppedRounds).length?"".concat(e," (Latest staging round)"):e,value:e}}))},canSubmit:function(){return this.hasEdits&&this.rowData.findIndex((function(t){return t.hasOwnProperty("current")&&(t.changeDescription.length||t.changes.length)}))>-1},canDrop:function(){return this.hasEdits&&this.hasSelected&&this.hasDetails},hasSelected:function(){return this.rowData.find((function(t){return!0===t.selected}))},hasDetails:function(){var t=this;return this.rowData.findIndex((function(e){return("current"==t.reviewType?1==e.current:!0===e.selected)&&(e.changeDescription.length>0||e.changes.length>0)}))>-1},hasEdits:function(){var t=this;return"current"==this.reviewType?this.rowData.filter((function(t){return t.hasOwnProperty("current")&&!0===t.current})).length>0:this.rowData.findIndex((function(e){return e.roundKey==t.stagingRoundNumber&&!e.current}))>-1},hasPending:function(){var t=this;return this.rowData.find((function(e){return e.roundKey&&e.roundKey==t.stagingRoundNumber}))},currentDroppedRounds:function(){return this.droppedStagingRounds(this.computedProjectID)},stagingRoundNumber:function(){return this.projectID&&this.projectID.length?this.getTargetStagingRoundNumber(this.projectID):this.getStagingRoundNumber},isInStaging:function(){return this.projectID&&this.projectID.length?this.targetProjectIsInStaging(this.projectID):this.projectIsInStaging},defaultSelectedRound:function(){return this.selectedRound||this.versionOptions[this.versionOptions.length-1].value},computedProjectID:function(){return this.projectID&&this.projectID.length?this.projectID:this.getProjectID}}),methods:x(x({},Object(f["b"])("tickets",["resetFieldData","updatedDeletedFields","createStagingEdit","clearUnSubmitted","clearLocalStorage","stagingConsolidateAndDrop","saveWorkingProject"])),{},{setReviewType:function(t){if(this.reviewType=t,"prev"==t){var e=this.versionOptions.find((function(t){return t.label.includes("Latest")}));this.selectedRound=e.value}},filterFieldNameOptions:function(t,e){var n=this;e((function(){if(""==t)n.filteredFieldNameOptions=n.fieldNameOptions;else{var e=t.toLowerCase();n.filteredFieldNameOptions=n.fieldNameOptions.filter((function(t){return t.toLowerCase().indexOf(e)>-1}))}}))},addRow:function(){var t="custom"+Date.now();this.rowData.push({fieldName:t,changes:"",changeDescription:"",url:this.url,location:"",affectsText:!1,affectsAV:!1,addedBy:this.username,selected:!0,index:this.rowData.length,current:!0,roundKey:this.stagingRoundNumber})},removeRow:function(t){var e=this,n=this.rowData.findIndex((function(e){return e.fieldName==t}));n>-1&&(this.rowData[n].changes.length||this.rowData[n].changeDescription.length?this.$q.dialog({title:"Confirm",message:"Remove this change? This deletion will undo any changes you made to this field in the current session.",cancel:!0}).onOk((function(){e.rowData[n].changeData&&(e.rowData[n].current?e.resetFieldData({segmentName:e.rowData[n].segmentName,fieldName:e.rowData[n].fieldName}).then((function(t){e.rowData[n].hasOwnProperty("deletedIndex")&&e.updatedDeletedFields(e.rowData[n].deletedIndex),e.saveWorkingProject(),e.renderTable()})):(e.rowData.splice(n,1),e.confirmSubmit()))})):(this.rowData.splice(n,1),this.renderTable()))},renderChange:function(t){var e,n=this,i="<div>";return Object.keys(t).forEach((function(r){e="<div>",e+="<div> ".concat(Object.keys(t).length>1?"#".concat(r.substring(0,1),": "):""),Object.keys(t[r]).forEach((function(i){e+="<div>".concat(Object.keys(t).length>1?'<span class="text-primary">'.concat(n.getInputBindingLabel(i),": </span>"):"","<span>").concat(n.renderFieldValue(t[r][i]),"</span></div>")})),e+="</div>",i+=e})),i+="</div>",i},renderFieldValue:function(t){var e,n=this;switch(h()(t)){case"boolean":return t?"Yes":"No";case"object":if(t.hasOwnProperty("original")){if("undefined"==typeof t.original)return'<span class="addition">'.concat(this.renderFieldValue(t.updated),"</span>");if("undefined"==typeof t.updated)return'<span class="deletion">'.concat(this.renderFieldValue(t.original),"</span>");if("string"==typeof t.updated&&"string"==typeof t.original)e=k.diff_main(t.original,t.updated);else if(Array.isArray(t.updated)&&Array.isArray(t.original))e=k.diff_main(t.original.join(","),t.updated.join(","));else if("object"==h()(t.updated)){var i="<div>";return Object.keys(t.updated).forEach((function(e){i+="<div><span>".concat(n.renderFieldValue({original:t.original[e],updated:t.updated[e]}),"</span></div>")})),i+="</div>",i}return k.diff_cleanupSemantic(e),k.diff_prettyHtml(e)}if(Array.isArray(t))return t.join(", ");var r='<ul class="updated-item">';return Object.keys(t).forEach((function(e){n.testValue(t[e])&&(r+='<li><span class="text-primary">'.concat(n.getInputBindingLabel(e),"</span><span>").concat(n.renderFieldValue(t[e]),"</span></li>"))})),r+="</ul>",r;case"undefined":return"Error: Check field.";default:return t}},renderDiff:function(t,e,n){var i,r=this,a=_.a.get(this.baseTicket,[t,e,"fields"],{}),s=_.a.get(this.activeTicket,[t,e,"fields"],{}),o=_.a.get(this.getUnSubmitted,[t,e,"fields"],{}),l="<div>";return n.forEach((function(t){i="<div>",i+="<div> ".concat(n.length>1?"#".concat(t.substring(0,1),": "):"");var e=Object.keys(s[t]).filter((function(e){return r.testValue(o[t][e])}));a[t]?e.forEach((function(e){i+="<div>".concat(Object.keys(s[t]).length>1?'<span class="text-primary">'.concat(r.getInputBindingLabel(e),": </span>"):"","<span>").concat(/<[^>]+>/g.test(s[t][e])?"Field updated (Add description)":r.renderFieldValue({updated:s[t][e],original:a[t][e]}),"</span></div>")})):e.forEach((function(e){i+="<div>".concat(Object.keys(s[t]).length>1?'<span class="text-primary">'.concat(r.getInputBindingLabel(e),": </span>"):"",'<span class="addition">').concat(/<[^>]+>/g.test(s[t][e])?"Field updated (Add description)":r.renderFieldValue(s[t][e]),"</span></div>")})),i+="</div>",l+=i})),l+="</div>",l},testValue:function(t){switch(h()(t)){case"object":return Object.keys(t).length>0;case"string":return t.length>0;case"number":case"boolean":return!0;default:return!1}},confirmSubmit:function(){var t,e,n=this;e="prev"==this.reviewType?this.defaultSelectedRound:this.stagingRoundNumber,t=this.rowData.filter((function(t){return t.roundKey==e})).map((function(t){return _.a.pick(t,["fieldName","segmentName","changes","changeDescription","changeData","url","location","affectsText","affectsAV","addedBy"])})),this.createStagingEdit({changes:t,user:this.username,additionalNotes:this.additionalNotes,projectID:this.computedProjectID,roundKey:e}).then((function(t){n.trNotify(t.ok?"Staging Edits Submitted!":t.message,t.ok?"":"negative"),t.ok&&(n.clearUnSubmitted(),n.hasLocal&&n.clearLocalStorage(),n.renderTable(),n.reviewType="all")}))},filterMethod:function(t,e){var n=this;switch(e){case"current":return t.filter((function(t){return 1==t.current}));case"prev":return t.filter((function(t){return t.roundKey==n.defaultSelectedRound}));default:return t.filter((function(t){return t.roundKey==n.stagingRoundNumber}))}},consolidateAndDrop:function(){var t=this,e=this.rowData.filter((function(e){return e.selected&&e.roundKey==t.stagingRoundNumber})).map((function(t){return _.a.pick(t,["fieldName","segmentName","changes","changeDescription","changeData","url","location","affectsText","affectsAV","addedBy"])}));this.$q.dialog({title:"Drop this staging round?",message:"This will drop the current staging round, applying ONLY the changes SELECTED from the table. Continue?",cancel:!0}).onOk((function(){t.stagingConsolidateAndDrop({roundKey:t.getStagingRoundNumber,user:t.username,chosenStagingFields:e,additionalNotes:t.additionalNotes,projectID:t.computedProjectID}).then((function(e){e.ok?(t.trNotify("Staging Round Successfully Dropped."),t.$router.push({name:"edit"})):t.trNotify(e.message,"negative")}))}))},selectRow:function(t,e){var n=this.rowData.findIndex((function(t){return t.index==e})),i=this.rowData[n];if(i.selected=t,t){var r=this.rowData.filter((function(t){var n=Object.keys(i.changeData).map((function(t){return t.substring(0,1)})),r=Object.keys(t.changeData).map((function(t){return t.substring(0,1)})),a=_.a.intersection(n,r);return t.index!=e&&t.fieldName==i.fieldName&&t.segmentName==i.segmentName&&a.length}));r.forEach((function(t){return t.selected=!1}))}},renderTable:function(){var t,e,n,i=this;this.rowData=[];var r=this.currentDroppedRounds?_.a.cloneDeep(this.currentDroppedRounds):{};Object.keys(r).forEach((function(e){t=_.a.get(r,[e,"changes"],[]),t.forEach((function(t){n=!0,i.rowData.forEach((function(e){e.segmentName==t.segmentName&&e.fieldName==t.fieldName&&Object.keys(t.changeData).forEach((function(t){Object.keys(e.changeData).findIndex((function(e){return e.substring(0,1)==t.substring(0,1)}))>-1&&(n=!1,e.selected=!1)}))})),i.rowData.push(Object.assign({selected:n,index:i.rowData.length,roundKey:e},t))}))})),e="prev"==this.reviewType?_.a.get(this.currentDroppedRounds,[this.defaultSelectedRound,"additionalNotes"],""):_.a.get(this.getStagingRound,"additionalNotes",""),this.additionalNotes=e,"prev"!=this.reviewType&&(Object.keys(this.getUnSubmitted).forEach((function(t){Object.keys(i.getUnSubmitted[t]).forEach((function(e){i.getUnSubmitted[t][e].fields&&Object.keys(i.getUnSubmitted[t][e].fields).length&&(n=!0,i.rowData.forEach((function(r){r.segmentName==t&&r.fieldName==e&&Object.keys(i.getUnSubmitted[t][e].fields).forEach((function(t){Object.keys(r.changeData).indexOf(t)>-1&&(n=!1,r.selected=!1)}))})),i.rowData.push({fieldName:e,segmentName:t,changes:i.renderChange(i.getUnSubmitted[t][e].fields),changeDescription:i.renderDiff(t,e,Object.keys(i.getUnSubmitted[t][e].fields)),changeData:i.getUnSubmitted[t][e].fields,url:i.url,location:"",affectsText:!1,affectsAV:!1,addedBy:i.username,selected:n,index:i.rowData.length,current:!0,roundKey:i.stagingRoundNumber}))}))})),this.deletedFields.filter((function(t){return"err"!=t})).forEach((function(t,e){var n=t.pointer.split("."),r=t.pointer.match(/\[(\d)/)[1],a=!0;i.rowData.forEach((function(t){t.segmentName==n[0]&&t.fieldName==n[1]&&Object.keys(t.changeData).includes(r)&&(a=!1,t.selected=!1)})),i.rowData.push({segmentName:n[0],fieldName:n[1],changes:"".concat(i.getLabel(n[0],n[1])," ").concat(r,' <span class="text-negative">Deleted.</span>'),changeDescription:"",changeData:t.pointer,deletedIndex:e,url:i.url,location:"",affectsText:!1,affectsAV:!1,addedBy:i.username,selected:a,index:i.rowData.length,current:!0,roundKey:i.stagingRoundNumber})})))},keyupHandler:function(t){13==t.which&&t.stopPropagation()}}),mounted:function(){(!this.isInStaging||this.$route.query.projectID||this.$route.params.project)&&(this.reviewType="prev"),this.renderTable()}},O=j,N=(n("5452"),n("2877")),P=Object(N["a"])(O,o,l,!1,null,null,null),S=P.exports;function T(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function C(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?T(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var I={data:function(){return{fetched:!1}},components:{"staging-edit-summary":S},computed:C(C({},Object(f["c"])("tickets",["getProjectID","projectKeys"])),{},{projectID:function(){return this.$route.params.project||null}}),methods:C({},Object(f["b"])("tickets",["setFetchedProject","fetchProjects"])),mounted:function(){var t=this;this.projectID&&!this.getProjectID.length?this.projectKeys.length?this.setFetchedProject(this.projectID).then((function(e){return t.fetched=!0})):this.fetchProjects().then((function(){t.setFetchedProject(t.projectID).then((function(e){return t.fetched=!0}))})):this.fetched=!0}},M=I,A=Object(N["a"])(M,i,r,!1,null,null,null);e["default"]=A.exports},5452:function(t,e,n){"use strict";var i=n("e892"),r=n.n(i);r.a},e892:function(t,e,n){}}]);