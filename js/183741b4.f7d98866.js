(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["183741b4"],{"2dd0":function(e,t,r){},"3be1":function(e,t,r){"use strict";var n=r("872e"),i=r.n(n);i.a},"548e":function(e,t,r){"use strict";var n=r("2dd0"),i=r.n(n);i.a},"5ca2":function(e,t,r){"use strict";var n=r("a3fa"),i=r.n(n);i.a},"872e":function(e,t,r){},a3fa:function(e,t,r){},a9c3:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-layout",{attrs:{view:"lHh Lpr lFf"}},[r("q-header",[r("q-toolbar",[r("q-btn",{attrs:{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu"},on:{click:function(t){e.leftDrawerOpen=!e.leftDrawerOpen}}}),r("q-toolbar-title",[e._v("\n        Ticket-Runner\n      ")]),e.username?r("q-btn",{attrs:{flat:"","aria-label":"Account"},on:{click:e.logout}},[r("div",{staticClass:"q-mr-sm"},[e._v("Logout "+e._s(e.user.profile.displayName))]),r("q-avatar",{attrs:{size:"42px"}},[r("img",{attrs:{src:e.user.profile.avatar}})])],1):e._e(),r("alerts-menu")],1),r("q-toolbar",{attrs:{inset:""}},[r("q-breadcrumbs",{attrs:{"active-color":"white"}},[e.getProjectID&&e.pageIsEdit?r("q-breadcrumbs-el",{scopedSlots:e._u([{key:"default",fn:function(){return[r("q-btn-dropdown",{attrs:{dense:"",flat:"",label:e.getProjectID+" Version "+e.getTicketID.replace("_",".")}},[r("q-item",{attrs:{clickable:""},on:{click:e.checkInTicket}},[r("q-item-section",[e._v("\n                  Check in ticket\n                ")])],1),"1"!=e.getTicketID?r("floating-meta"):e._e()],1)]},proxy:!0}],null,!1,3580687199)}):e._e(),e._l(e.breadcrumbs,(function(e){return r("q-breadcrumbs-el",{key:e.routerLink,attrs:{icon:e.icon,label:e.label,to:e.routerLink}})}))],2)],1),e.showProgress?r("progress-bar"):e._e(),e.hasLocal?r("toggle-local"):e._e()],1),r("q-drawer",{attrs:{value:e.leftDrawerOpen&&e.username&&e.username.length>0,"show-if-above":"",bordered:"","content-class":"bg-grey-2",width:400},on:{input:function(t){e.leftDrawerOpen=!e.leftDrawerOpen}}},[r("q-list",[r("q-btn",{staticClass:"mobile-drawer-btn",attrs:{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu"},on:{click:function(t){e.leftDrawerOpen=!e.leftDrawerOpen}}}),r("q-item",{attrs:{clickable:"",exact:"",to:"/home"}},[r("q-item-section",{attrs:{avatar:""}},[r("q-icon",{attrs:{name:"home"}})],1),r("q-item-section",[r("q-item-label",[e._v("Home")]),r("q-item-label",{attrs:{caption:""}},[e._v("View Your Recent Projects")])],1)],1),e.hasPermission("create")?r("q-item",{attrs:{clickable:"",exact:"",to:"/new"}},[r("q-item-section",{attrs:{avatar:""}},[r("q-icon",{attrs:{name:"description"}})],1),r("q-item-section",[r("q-item-label",[e._v("New Project")]),r("q-item-label",{attrs:{caption:""}},[e._v("Create a New Project")])],1)],1):e._e(),e.getProjectID.length?r("q-item",{attrs:{clickable:"",exact:"",to:{path:"/viewTicket",query:{projectId:e.getProjectID}}}},[r("q-item-section",{attrs:{avatar:""}},[r("q-icon",{attrs:{name:"description"}})],1),r("q-item-section",[r("q-item-label",[e._v("View Ticket")]),r("q-item-label",{attrs:{caption:""}},[e._v("View Ticket")])],1)],1):e._e(),r("q-item",{attrs:{clickable:"",exact:"",to:"/settings"}},[r("q-item-section",{attrs:{avatar:""}},[r("q-icon",{attrs:{name:"settings"}})],1),r("q-item-section",[r("q-item-label",[e._v("Settings and Tools")]),r("q-item-label",{attrs:{caption:""}},[e._v("Add Supporters,\n            "+e._s(e.hasPermission("addUser")?"Add Team members,":"")+" Change\n            App Settings and Defaults")])],1)],1),r("q-item",{attrs:{clickable:"",exact:"",to:"/edit"}},[r("q-item-section",{attrs:{avatar:""}},[r("q-icon",{attrs:{name:"create"}})],1),r("q-item-section",[r("q-item-label",[e._v("Projects")]),r("q-item-label",{attrs:{caption:""}},[e._v("Search Projects / Edit Prodticket Fields")])],1)],1),e.$route.path.includes("edit")&&e.getProjectID.length&&e.treeEnabled?r("q-item",{staticStyle:{"padding-left":"0"}},[r("q-item-section",{staticStyle:{"justify-content":"start!important"},attrs:{avatar:""}},[r("q-icon",{staticClass:"q-ml-md",staticStyle:{"margin-top":"20px"},attrs:{color:e.$route.path.includes("edit")?"primary":"",name:"search"}})],1),r("q-item-section",[r("tree-nav",{on:{"mobile-close-drawer":e.closeDrawer}})],1)],1):e._e(),e.getProjectID.length&&(e.projectIsInStaging&&(e.getStagingEdits&&Object.keys(e.getStagingEdits).length>0))?r("q-item",{attrs:{clickable:"",exact:"",to:"/staginground"}},[r("q-item-section",{attrs:{avatar:""}},[r("q-icon",{attrs:{name:"list"}})],1),r("q-item-section",[r("q-item-label",[e._v("Staging Round")]),r("q-item-label",{attrs:{caption:""}},[e._v("Review and Drop changes from the current staging\n            round.")])],1)],1):e._e()],1)],1),r("q-page-container",[r("router-view")],1)],1)},i=[],s=(r("8e6e"),r("8a81"),r("ac6a"),r("cadf"),r("06db"),r("456d"),r("7f7f"),r("28a5"),r("6762"),r("2fdb"),r("c47a")),o=r.n(s),a=(r("24e8"),r("2f62")),c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.userFlags.length>0?r("q-btn-dropdown",{staticClass:"alert-dropdown",attrs:{dense:"",stretch:"",round:"",flat:""},scopedSlots:e._u([{key:"label",fn:function(){return[r("q-btn",{staticClass:"no-pointer-events",attrs:{dense:"",round:"",flat:"",icon:e.alertIcon}},[e.userFlags.length>0?r("q-badge",{attrs:{color:"red",floating:""}},[e._v(e._s(e.userFlags.length))]):e._e()],1)]},proxy:!0}],null,!1,3939479318)},[r("q-list",e._l(e.userFlags,(function(t,n){return r("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],key:n,attrs:{clickable:""},on:{click:function(r){return e.onAlertClick(t)}}},[r("q-item-section",[r("q-item-label",[e._v(e._s(e.getLabel(t.segmentName,null)+" / "+e.getLabel(t.segmentName,t.fieldName)))]),r("q-item-label",{attrs:{caption:""}},[e._v(e._s(e.displayDate(t.flagDate)))]),""!=t.flagDescription?r("q-item-label",{attrs:{caption:""}},[e._v(e._s(e.abbreviate(t.flagDescription)))]):e._e()],1),r("q-item-section",{staticStyle:{"align-items":"center!important"},attrs:{side:""}},[r("q-icon",{attrs:{name:"comment"===t.flagType?"comment":"info",color:"high"==t.urgency?"negative":"amber"}},["comment"!=t.flagType&&"assignUser"!=t.urgency?r("q-tooltip",{attrs:{"content-class":"bg-primary"}},[e._v("This has been marked as a "+e._s(t.urgency)+" priority alert.")]):e._e()],1),r("q-checkbox",{attrs:{value:e.bin,"keep-color":"",color:"primary"},on:{input:function(r){return e.setCompleted(t.flagID)}}},[r("q-tooltip",{attrs:{"content-class":"bg-primary"}},[e._v("Mark As Completed")])],1)],1)],1)})),1)],1):e._e()],1)},l=[],u=(r("f751"),r("7514"),r("3846"),r("6165"));function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p={data:function(){return{bin:!1}},mixins:[u["a"]],computed:f({},Object(a["c"])("flags",["flags"]),{},Object(a["c"])("auth",["username"]),{},Object(a["d"])("tickets",["workingProject"]),{userFlags:function(){var e=this;return Object.keys(this.flags).filter((function(t){return Object.keys(e.flags[t].associatedUsers).find((function(t){return t===e.username}))&&!1===e.flags[t].associatedUsers[e.username].completed&&"none"!=e.flags[t].urgency})).map((function(t){return Object.assign(e.flags[t],{flagID:t})}))},hasAlerts:function(){return!0},hasHighPriorityAlerts:function(){return!0},alertIcon:function(){return this.hasHighPriorityAlerts?"notification_important":this.hasAlerts?"notifications":void 0}}),methods:f({},Object(a["b"])("flags",["markAsCompleted"]),{setCompleted:function(e){this.markAsCompleted({flagID:e,username:this.username}),this.trNotify("Marked flag as complete")},onAlertClick:function(e){var t,r=this;this.$route.name!==e.segmentName&&this.$router.push({name:e.segmentName}),Object.keys(this.flags).find((function(n){r.flags[n].flagDate===e.flagDate&&(t=n)})),setTimeout((function(){r.$root.$emit("showFlag",{fieldName:e.fieldName,flagType:e.flagType,id:t,fieldKey:e.fieldKey})}),500)}})},m=p,b=r("2877"),g=Object(b["a"])(m,c,l,!1,null,null,null),h=g.exports,O=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("q-input",{ref:"filter",attrs:{borderless:"",filled:"",label:"Filter"},scopedSlots:e._u([{key:"append",fn:function(){return[""!==e.filter?r("q-icon",{staticClass:"cursor-pointer",attrs:{name:"clear"},on:{click:e.resetFilter}}):e._e()]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}),r("q-checkbox",{class:e.showRequired?"text-grey-8":"text-grey-6",attrs:{value:e.showRequired,size:"lg",label:"Show required fields only"},on:{input:e.setShowRequired}}),r("q-tree",{ref:"trTree",attrs:{nodes:e.editRoutes,"tick-strategy":"strict",ticked:e.ticked,expanded:e.expanded,selected:e.selected,filter:e.filter,"node-key":"label"},on:{"update:ticked":function(t){e.ticked=t},"update:expanded":function(t){e.expanded=t},"update:selected":function(t){e.selected=t}}})],1)},v=[];function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var q={mixins:[u["a"]],data:function(){return{editRoutes:[],expanded:["Prodticket Fields"],selected:[],filter:""}},methods:j({},Object(a["b"])("tickets",["setShowRequired"]),{resetFilter:function(){this.filter="",this.$refs.filter.focus()},sendRoute:function(e){this.$route.name!==e&&this.$router.push({name:e})},setTreeValues:function(){var e=this,t=function(t){return!e.isRequired(t)&&e.showRequired||!e.isRendered(t.segmentName,t.name)?void 0:{label:t.label,tickable:e.isRequired(t),ticked:!0,handler:function(r){e.sendRoute(t.segmentName),setTimeout((function(){var r=document.querySelector("#".concat(t.name,"1"));e.$root.$emit("setScroll",r.offsetTop)}),400)}}},r=function(t){return{label:t.label,handler:function(r){e.sendRoute(t.name),setTimeout((function(){e.closeDrawer()}),500)},noTick:!0,children:[]}};if(this.editRoutes=[{label:"Prodticket Fields",content:["Edit the latest prodticket for working project"],icon:"none",noTick:!0,header:"main",expanded:!0,children:[]}],this.editRoutes[0].children=_.map(this.navigationSegments,(function(e){var n=r(e);return Object.keys(e.fields).forEach((function(r){e.fields[r].segmentName=e.name;var i=t(e.fields[r]);i&&n.children.push(i)})),n})),this.showRequired&&(this.editRoutes[0].children=this.editRoutes[0].children.filter((function(e){return e&&e.children.length}))),this.projectIsInStaging){var n=this;this.editRoutes[0].children.push({label:"Staging Edits",name:"stagingEdits",handler:function(e){return n.sendRoute("stagingEdits")},tickable:!1,children:[]})}},closeDrawer:function(){this.$emit("mobile-close-drawer")}}),computed:j({},Object(a["d"])("auth",["currentUser"]),{},Object(a["d"])("tickets",["showRequired"]),{ticked:{get:function(){var e=this;return this.getEnabledFields?Object.keys(this.getEnabledFields).map((function(t){return e.getLabel(e.getEnabledFields[t].segmentName,t)})):[]},set:function(e){var t="",r="",n="";n=e.length>this.ticked.length?_.difference(e,this.ticked):_.difference(this.ticked,e),_.forEach(this.segments,(function(e,i){_.forEach(e.fields,(function(i,s){i.label==n&&(t=e.name,r=i.name)}))})),this.toggleFieldEnable({fieldName:r,segmentName:t})}}}),watch:{$route:function(){if(this.$route.name&&"edit"!=this.$route.name)try{this.expanded.push(this.getLabel(this.$route.name))}catch(e){console.log("error: ",e)}},getEnabledFields:function(){this.setTreeValues()},showRequired:function(){this.setTreeValues(),this.showRequired?this.$refs.trTree.expandAll():(this.$refs.trTree.collapseAll(),this.expanded.push("Prodticket Fields"),this.expanded.push(this.getLabel(this.$route.name))),this.$root.$emit("updateKey")},currentUser:function(){this.setTreeValues()}},beforeMount:function(){var e=this;this.$root.$on("scrollArea",(function(t){e.scrollAreaRef=t}))},mounted:function(){this.setTreeValues()}},k=q,w=(r("5ca2"),Object(b["a"])(k,O,v,!1,null,null,null)),P=w.exports,D=r("01ea"),$=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"q-pa-xs"},[e.getWorkingProject?r("q-linear-progress",{attrs:{size:"20px",value:e.percentCompleted,color:"primary",stripe:""}},[r("div",{staticClass:"absolute-full flex flex-center"},[r("q-badge",{attrs:{color:"white","text-color":"primary",label:this.displayUserProgress(e.currentUserRequiredFields.length,e.numberOfUserCompletedFields)}})],1)]):e._e()],1)},x=[];function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var F={mixins:[u["a"]],data:function(){return{}},methods:{},computed:E({},Object(a["c"])("tickets",["getCompletedFields","getWorkingProject"]),{percentCompleted:function(){return this.numberOfUserCompletedFields/this.currentUserRequiredFields.length},numberOfUserCompletedFields:function(){var e=[],t=Object.keys(this.getDisabledFields),r=Object.keys(this.getCompletedFields);return this.currentUserRequiredFields.forEach((function(n){(_.includes(t,n)||_.includes(r,n))&&e.push(n)})),e.length||0},displayTotalFieldsLeft:function(){var e=[],t=Object.keys(this.getDisabledFields),r=Object.keys(this.getCompletedFields);return this.currentUserRequiredFields.forEach((function(n){_.includes(t,n)||_.includes(r,n)||e.push(n)})),e},totalFieldsLeft:function(){return this.displayTotalFieldsLeft.length}})},I=F,C=(r("548e"),Object(b["a"])(I,$,x,!1,null,null,null)),R=C.exports,T=r("fc1b"),L=r("f262"),N=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("transition",{attrs:{"enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut"}},[e.toggled?r("q-banner",{staticClass:"bg-orange text-white",attrs:{"inline-actions":"",rounded:""},scopedSlots:e._u([{key:"action",fn:function(){return[r("q-btn",{attrs:{flat:"",label:"Dismiss"},on:{click:e.toggle}})]},proxy:!0}],null,!1,353908348)},[e._v("\n        You have a local version of this project (SF # "+e._s(e.getProjectID)+') saved in your browser. You can toggle between versions using the button next to "save".\n        '),e.localIsStale&&e.localIsLoaded?[e._v(" \n            Note: Your browser's version is outdated. You will not be able to submit.\n        ")]:[e._v("\n            Your local browser version may have changes that are not on the public version.\n        ")]],2):e._e()],1)],1)},A=[];function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var V={computed:M({},Object(a["c"])("tickets",["localIsStale","localIsLoaded","getProjectID"])),data:function(){return{toggled:!0}},methods:{toggle:function(){this.toggled=!this.toggled}},mounted:function(){var e=this;this.$root.$on("dismissLocalBanner",(function(){e.toggled=!1})),this.$root.$on("showLocalBanner",(function(){e.toggled=!0}))}},Y=V,z=Object(b["a"])(Y,N,A,!1,null,null,null),H=z.exports,W={methods:{isMobile:function(){return screen.width<760}}};function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(Object(r),!0).forEach((function(t){o()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var J={name:"MyLayout",mixins:[L["a"],W],data:function(){return{leftDrawerOpen:!1}},components:{"alerts-menu":h,"tree-nav":P,"floating-meta":D["a"],"progress-bar":R,"toggle-local":H},watch:{leftDrawerOpen:function(e){this.$root.$emit("drawerChange",e)}},methods:B({},Object(a["b"])("tickets",["setWorkingProject"]),{closeDrawer:function(){this.isMobile()&&(this.leftDrawerOpen=!1)},checkInTicket:function(){var e=this;this.$q.dialog({title:"Confirm",message:"Check in current project? You will lose any unsubmitted/unsaved changes, and the project will become available for other users to edit.",persistent:!0,cancel:!0}).onOk((function(){e.$router.push({name:"edit"}),e.setWorkingProject({oldID:e.getProjectID})}))},logout:function(){this.$q.dialog({title:"Confirm logout",message:"Log out?",persistent:!0,cancel:!0}).onOk((function(){T["a"].logout()}))}}),computed:B({},Object(a["c"])("auth",["username","user"]),{},Object(a["c"])("tickets",["projectIsInStaging","getProjectID","getTicketID","treeEnabled","hasLocal","getStagingEdits"]),{pageIsEdit:function(){return this.$route.path.includes("edit")},breadcrumbs:function(){var e=this,t=this.$route.path.split("/");t.shift();var r=t.reduce((function(t,r,n){return t.push({path:r,routerLink:t[n-1]?"/"+t[n-1].path+"/"+r:"/"+r,label:e.$route.matched[n+1].meta.breadCrumb,icon:e.$route.matched[n+1].meta.icon}),t}),[]);return r},showProgress:function(){var e=this.$route;if("Default"!==e.meta.breadCrumb)return this.$route.meta.breadCrumb}}),beforeMount:function(){var e=this;this.$root.$on("breadcrumb",(function(t){e.breadcrumbs=t}))},mounted:function(){this.showProgress}},G=J,Q=(r("3be1"),Object(b["a"])(G,n,i,!1,null,null,null));t["default"]=Q.exports}}]);